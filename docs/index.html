```html
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lee Hopkins — Training OS</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>

<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>

<div class="app">

<nav class="sidebar">

<div class="sidebar-brand">
<span class="brand-initials">LH</span>
<span class="brand-text">Training<br>OS</span>
</div>

<ul class="nav-links">
<li class="nav-item active"><a href="index.html"><span class="nav-icon">◈</span><span>Overview</span></a></li>
<li class="nav-item"><a href="cycling.html"><span class="nav-icon">⬡</span><span>Cycling</span></a></li>
<li class="nav-item"><a href="running.html"><span class="nav-icon">▷</span><span>Running</span></a></li>
<li class="nav-item"><a href="rowing.html"><span class="nav-icon">⊕</span><span>Rowing</span></a></li>
<li class="nav-item"><a href="cardio.html"><span class="nav-icon">◎</span><span>Cardio</span></a></li>
<li class="nav-item"><a href="other.html"><span class="nav-icon">○</span><span>Other</span></a></li>
</ul>

<div class="sidebar-footer">
<div class="sync-status">
<span class="sync-dot"></span>
<span class="sync-text" id="last-sync">Loading...</span>
</div>
</div>

</nav>


<main class="main-content">

<header class="page-header">

<div class="header-left">
<h1 class="page-title">Overview</h1>
<span class="page-subtitle" id="page-subtitle">—</span>
</div>

<div class="header-right">

<div>

<div class="year-totals">
<div class="year-stat">
<span class="year-stat-value" id="ytd-distance">—</span>
<span class="year-stat-label">km YTD</span>
</div>

<div class="year-stat">
<span class="year-stat-value" id="ytd-hours">—</span>
<span class="year-stat-label">hrs YTD</span>
</div>

<div class="year-stat">
<span class="year-stat-value" id="ytd-tss">—</span>
<span class="year-stat-label">TSS YTD</span>
</div>
</div>


<div class="ytd-breakdown">

<div class="ytd-sport cycling">
<span class="ytd-sport-label">⬡ Cycling</span>

<div class="ytd-sport-stats">
<div class="ytd-mini">
<span class="ytd-mini-val" id="ytd-cy-dist">—</span>
<span class="ytd-mini-lbl">km</span>
</div>

<div class="ytd-mini">
<span class="ytd-mini-val" id="ytd-cy-hrs">—</span>
<span class="ytd-mini-lbl">hrs</span>
</div>

<div class="ytd-mini">
<span class="ytd-mini-val" id="ytd-cy-tss">—</span>
<span class="ytd-mini-lbl">TSS</span>
</div>

</div>
</div>


<div class="ytd-sport running">
<span class="ytd-sport-label">▷ Running</span>

<div class="ytd-sport-stats">
<div class="ytd-mini">
<span class="ytd-mini-val" id="ytd-ru-dist">—</span>
<span class="ytd-mini-lbl">km</span>
</div>

<div class="ytd-mini">
<span class="ytd-mini-val" id="ytd-ru-hrs">—</span>
<span class="ytd-mini-lbl">hrs</span>
</div>

<div class="ytd-mini">
<span class="ytd-mini-val" id="ytd-ru-tss">—</span>
<span class="ytd-mini-lbl">TSS</span>
</div>

</div>
</div>

</div>
</div>
</div>

</header>



<div id="loading-state" class="loading-overlay">
<div class="loading-spinner"></div>
<span id="loading-msg">Loading dashboard data...</span>
</div>

<div id="error-state" class="error-state hidden">
<strong>No data found.</strong>
<span id="error-msg"></span>
</div>


<div id="dashboard-content" class="hidden">


<section class="metrics-row">

<div class="metric-card fitness">
<div class="metric-label">Fitness</div>
<div class="metric-value metric-accent" id="ctl-value">—</div>
<div class="metric-delta" id="ctl-delta">—</div>
<div class="metric-bar">
<div class="metric-bar-fill" id="ctl-bar"></div>
</div>
<div class="metric-sub">Chronic Training Load</div>
</div>


<div class="metric-card fatigue">
<div class="metric-label">Fatigue</div>
<div class="metric-value metric-orange" id="atl-value">—</div>
<div class="metric-delta" id="atl-delta">ATL</div>
<div class="metric-bar">
<div class="metric-bar-fill" id="atl-bar"></div>
</div>
<div class="metric-sub">Acute Training Load</div>
</div>


<div class="metric-card form">
<div class="metric-label">Form</div>
<div class="metric-value metric-green" id="tsb-value">—</div>
<div class="metric-delta" id="tsb-delta">—</div>
<div class="metric-bar">
<div class="metric-bar-fill" id="tsb-bar"></div>
</div>
<div class="metric-sub">Training Stress Balance</div>
</div>

</section>



<!-- CALENDAR SECTION -->

<section class="calendar-section">

<div class="section-header">
<h2>Training Calendar</h2>
</div>

<div id="calendar-body" class="calendar-grid"></div>

</section>


</div>
</main>
</div>



<script>


// ===============================
// FORM / TSB HELPERS
// ===============================

function getFormClass(tsb)
{
if(tsb == null) return '';
return tsb >= 0 ? 'fresh' : 'tired';
}


function predictTSB(lastCTL,lastATL,futureTSS=0)
{
const ctlTau=42;
const atlTau=7;

const newCTL=lastCTL+(futureTSS-lastCTL)/ctlTau;
const newATL=lastATL+(futureTSS-lastATL)/atlTau;

return newCTL-newATL;
}



// ===============================
// CALENDAR RENDER
// ===============================

function renderCalendar(days,lastKnownCTL=null,lastKnownATL=null)
{

if(!Array.isArray(days)) return;

let html='';
let ctl=lastKnownCTL;
let atl=lastKnownATL;

for(let w=0;w<days.length;w+=7)
{

const week=days.slice(w,w+7);
if(!week.length) continue;

const firstDate=week[0]?.ds;
const wkNum=firstDate?getISOWeekNum(new Date(firstDate)):'';

html+=`<div class="calendar-row">`;
html+=`<div class="cal-week-num">W${wkNum}</div>`;

week.forEach(day=>
{

if(!day) return;

const act=day.acts?.[0]||null;

let tsb=null;

if(day.lw && day.lw.tsb!=null)
{
tsb=day.lw.tsb;
ctl=day.lw.ctl ?? ctl;
atl=day.lw.atl ?? atl;
}

else if(ctl!=null && atl!=null)
{
const tss=act?.tss||0;

tsb=predictTSB(ctl,atl,tss);

ctl=ctl+(tss-ctl)/42;
atl=atl+(tss-atl)/7;
}

const formClass=getFormClass(tsb);

html+=`
<div class="cal-day-cell ${formClass}">
<div class="cal-date-num">${day.dayNum||''}</div>
</div>
`;

});

html+=`</div>`;
}

const el=document.getElementById("calendar-body");

if(el) el.innerHTML=html;

}



// SAFE INIT
document.addEventListener("DOMContentLoaded",function()
{
console.log("Training OS ready");
});


</script>


</body>
</html>
```
